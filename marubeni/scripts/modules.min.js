"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ApplyParallax(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*[data-parallax]",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data-parallax";if(!Utilities||!Utilities.querySelectorArray)return console.warn("Missing querySelectorArray");if("undefined"==typeof EventThrottler)return console.warn("Missing EventThrottler");if("undefined"==typeof AnimationFrameController)return console.warn("Missing AnimationFrameController");var n=["vw","vh","vmin","px","em","rem","%"],r=function(e){return n.find(function(t){return e.indexOf(t)>=1})},i=Utilities.querySelectorArray(e).map(function(e){var n=e.getAttribute(t).split(","),i=(n[0]||"0->0").split("->"),o=(n[1]||"0->0").split("->");return i[1]="undefined"==typeof i[1]?i[0]:i[1],i[2]=r(i[0])||r(i[1])||"%",i[0]=parseFloat(i[0]),i[1]=parseFloat(i[1]),o[1]="undefined"==typeof o[1]?o[0]:o[1],o[2]=r(o[0])||r(o[1])||"%",o[0]=parseFloat(o[0]),o[1]=parseFloat(o[1]),{node:e,x:i,y:o}}),o=new EventThrottler(window,"scroll");console.log(i);var a=function(e){i.forEach(function(e){var t=e.node.getBoundingClientRect();if(t.top+t.height>0&&t.top<window.innerHeight){var n=1-(t.top+t.height)/(window.innerHeight+2*t.height),r=e.x[0]+(e.x[1]-e.x[0])*n,i=e.y[0]+(e.y[1]-e.y[0])*n;r=r.toFixed(3)+e.x[2],i=i.toFixed(3)+e.y[2],e.node.style.webkitTransform="translate("+r+","+i+")",e.node.style.mozTransform="translate("+r+","+i+")",e.node.style.msTransform="translate("+r+","+i+")",e.node.style.oTransform="translate("+r+","+i+")",e.node.style.transform="translate("+r+","+i+")"}})};o.addHandler(a),o.fire(!0),window.addEventListener("resize",function(e){return a()})}function replaceSVG(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[data-svg]",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DISPATCH_EVENT";if(document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect){var n=Utilities.querySelectorArray(e),r=[];n.forEach(function(i){function o(){r.length===n.length&&"DISPATCH_EVENT"===t?window.dispatchEvent&&window.dispatchEvent(new CustomEvent("svgreplaced",{detail:{query:e,done:r,success:!0}})):r.length===n.length&&"function"==typeof t&&t(r)}var a=i.id,s=i.className,l=i.getAttribute("data-svg");Utilities.XMLHttpRequest(l,function(e){var t=document.createElement("div");t.innerHTML=e;var n=t.querySelector("svg");n?(n.setAttribute("id",a),n.setAttribute("class",s),n.setAttribute("data-svg-source",l),i.parentNode.insertBefore(n,i),i.parentNode.removeChild(i),r.push(n)):r.push(i),o()},function(){r.push(i),o()})})}else window.dispatchEvent(new CustomEvent("svgreplaced",{detail:{query:e,done:[],success:!1}}))}var AnimationFrameController=function(){function e(i){for(var a=0;a<t.length;a++)if(t[a].time===-1)t[a].time=i;else{var s=t[a].handler(i-r,i-t[a].time);s===!1&&(o.remove(t[a].id),a--)}r=i,n&&t.length?n=window.requestAnimationFrame(e):o.stop()}var t=[],n=!1,r=-1,i=0,o={start:function(){n=window.requestAnimationFrame(e)},stop:function(){window.cancelAnimationFrame(n),n=!1},get paused(){return!!n},autostart:!0,add:function(e){return i++,t.unshift({time:-1,handler:e,id:i}),this.autostart&&t.length&&this.start(),i},remove:function(e){for(var n,r=0;r<t.length;r++)t[r].id!==e&&t[r].handler!==e||(n=t[r].handler,t.splice(r,1),r--);return this.autostart&&0===t.length&&this.stop(),n},debug:function(){return{functions:t.slice(),animationFrame:n||!1,time:r}}};return o}(),EventThrottler=function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.timing,a=void 0===o?1e3:o,s=i.firstEvent,l=void 0!==s&&s,c=i.autostart,d=void 0===c||c,u=i.preventDefault,p=void 0!==u&&u,f=i.stopImmediatePropagation,m=void 0!==f&&f;_classCallCheck(this,e);var h=function(){var e=!1;return function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t&&p&&t.preventDefault(),t&&m&&t.stopImmediatePropagation(),!(!t||e&&l))return e="function"==typeof t.constructor?new t.constructor(t.type,t):t;if(t===!1){var n=e;return e=!1,n}}}(),v=void 0,g=[],w=this,y="undefined"!=typeof AnimationFrameController&&function(){return r.fire()};t.addEventListener(n,h),this.fire=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=h();(e||t)&&g.forEach(function(n){return n(e||t)})},this.start=function(){y?AnimationFrameController.add(y):v=setInterval(function(){w.fire()},a)},this.stop=function(){y?animationFrameController.remove(y):clearInterval(v)},this.removeHandler=function(e){for(var t=-1;(t=g.indexOf(e))>=0;)g.splice(t,1);return e},this.addHandler=function(e){return g.indexOf(e)<0&&g.push(e),e},d&&this.start()},createShareElement=function(){var e={linkedin:"http://www.linkedin.com/shareArticle?mini=true&url={articleUrl}",facebook:"https://www.facebook.com/sharer/sharer.php?u={articleUrl}",twitter:"https://twitter.com/home?status={articleUrl}",email:"mailto:?subject={subject}&body={articleUrl}",googleplus:"https://plus.google.com/share?url={articleUrl}"};return function(t){var n=t.url,r=void 0===n?location.href:n,i=t.type,o=void 0===i?"a":i,a=t.className,s=void 0===a?"share__":a,l=t.networks,c=void 0===l?["facebook","twitter","email","linkedin"]:l,d=t.title,u=void 0===d?encodeURIComponent("Shared: "+document.title):d,p=t.wrapper,f=void 0===p?"div":p,m=t.urls,h=void 0===m?e:m;return c.reduce(function(e,t){var n=document.createElement(o);return n.className=s+t,n.href=h[t].replace("{articleUrl}",r).replace("{subject}",u),n.target="_blank",n.textContent="share on "+t,e.appendChild(n),e},"string"==typeof f?document.createElement(f):f)}}(),initVimeoPlayer=function(){var e=new Promise(function(e,t){var n="https://player.vimeo.com/api/player.js";if(document.querySelector('script[src="'+n+'"]'))e();else{var r=document.createElement("script");r.setAttribute("type","text/javascript"),r.addEventListener("load",e),r.addEventListener("error",t),r.src=n,document.body.appendChild(r)}});return function(t){return new Promise(function(n,r){e.then(function(){function e(e){e=e<0?0:e>1?1:e,p.style.width=100*e+"%",p.style.height=100*e+"%",a.setCurrentTime(e*s),h=.25*Math.floor(e/.25)}function r(e){console.log(e),e=e<0?0:e>1?1:e,g.style.width=100*e+"%",g.style.height=100*e+"%",a.setVolume(e)}var i=(t.parentNode,document.createElement("div")),o=document.createElement("ul");i.className="vimeo player";var a=new Vimeo.Player(t),s=1,l=t.getAttribute("src"),c=l;a.getVideoTitle().then(function(e){return c=""+e}),a.on("ended",function(e){Utilities.createDispatchEvent(window,"adobetagevent",{source:l,title:c,action:"ended"})}),a.getDuration().then(function(e){s=e}),a.getVolume().then(function(e){g.style.width=100*e+"%",g.style.height=100*e+"%"});var d=document.createElement("li");d.className="play",d.addEventListener("click",function(){"play"===d.className?a.play():a.pause()}),a.ready().then(function(){a.on("play",function(){d.className="pause",Utilities.createDispatchEvent(window,"adobetagevent",{source:l,title:c,action:"play"})}),a.on("pause",function(){d.className="play",Utilities.createDispatchEvent(window,"adobetagevent",{source:l,title:c,action:"pause"})})});var u=document.createElement("li"),p=document.createElement("span"),f=document.createElement("span"),m=!1,h=0;p.className="progress-bar",f.className="progress-bar-load",u.className="progress",u.appendChild(p),u.appendChild(f),u.addEventListener("mousedown",function(t){m||e(t.offsetX/u.clientWidth),m=!0}),u.addEventListener("mousemove",function(t){m&&e(t.offsetX/u.clientWidth)}),u.addEventListener("mouseup",function(e){m=!1}),u.addEventListener("mouseleave",function(e){m=!1}),a.ready().then(function(){a.on("progress",function(e){f.style.width=100*e.percent+"%",f.style.height=100*e.percent+"%"}),a.on("timeupdate",function(e){p.style.width=100*e.percent+"%",p.style.height=100*e.percent+"%";var t=!1;e.percent>=h+.25&&(t=!0,h+=.25),Utilities.createDispatchEvent(window,"adobetagevent",{source:l,title:c,action:"time",milestone:e.percent-e.percent%.25||0,isMilestone:t,value:e.percent,duration:s})})});var v=document.createElement("li"),g=document.createElement("span"),w=!1;v.className="volume",v.appendChild(g),v.addEventListener("mousedown",function(e){r(e.offsetX/v.clientWidth),w=!0}),v.addEventListener("mousemove",function(e){w&&r(e.offsetX/v.clientWidth)}),v.addEventListener("mouseup",function(e){w=!1}),v.addEventListener("mouseleave",function(e){w=!1}),o.appendChild(d),o.appendChild(u),o.appendChild(v),t.parentNode.insertBefore(i,t),i.appendChild(t),i.appendChild(o),n({player:a,element:t})})})}}();